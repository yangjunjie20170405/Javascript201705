<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        *{
            margin:0;
            padding:0;
        }
        ul {
            list-style: none;
        }
        #box{
            width :650px;
            margin:20px auto;
        }
        #box li{
            position: relative;
            margin-left : 10px;
        }
        #box ul{
            margin-left :10px;
        }
        #box em{
            position: absolute;
            top : 3px;
            width:16px;
            height:16px;
            background: url("img/icon.png") no-repeat -60px -28px;
            cursor: pointer;
        }
        #box span{
            -webkit-user-select: none;
            padding-left : 20px;
        }
        #box em.open{
            background-position: -43px -28px;
        }
        #box ul{
            display: none;
        }

    </style>

</head>
<body>
<ul id="box">
    <li>
        <em></em><span>第一级第一个</span>
        <ul>
            <li>
                <em></em><span>第二级第一个</span>
                <ul>
                    <li><span>第三级第一个</span></li>
                    <li><span>第三级第二个</span></li>
                    <li><span>第三级第三个</span></li>
                </ul>
            </li>
            <li>
                <em></em><span>第二级第二个</span>
                <ul>
                    <li>
                        <em></em><span>第三级第一个</span>
                        <ul>
                            <li><span>第四级第一个</span></li>
                            <li><span>第四级第二个</span></li>
                            <li><span>第四级第三个</span></li>
                        </ul>
                    </li>
                    <li><em></em><span>第三级第二个</span>
                        <ul>
                            <li><span>第四级第一个</span></li>
                            <li><span>第四级第二个</span></li>
                            <li><span>第四级第三个</span></li>
                        </ul>
                    </li>
                    <li><em></em><span>第三级第三个</span>
                        <ul>
                            <li><span>第四级第一个</span></li>
                            <li><span>第四级第二个</span></li>
                            <li><span>第四级第三个</span></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <em></em><span>第二级第三个</span>
                <ul>
                    <li><span>第三级第一个</span></li>
                    <li><span>第三级第二个</span></li>
                    <li><span>第三级第三个</span></li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <em></em><span>第一级第二个</span>
        <ul>
            <li>
                <em></em><span>第二级第一个</span>
                <ul>
                    <li><span>第三级第一个</span></li>
                    <li><span>第三级第二个</span></li>
                    <li><span>第三级第三个</span></li>
                </ul>
            </li>
            <li>
                <em></em><span>第二级第二个</span>
                <ul>
                    <li><span>第三级第一个</span></li>
                    <li><span>第三级第二个</span></li>
                    <li><span>第三级第三个</span></li>
                </ul>
            </li>
            <li>
                <em></em><span>第二级第三个</span>
                <ul>
                    <li><span>第三级第一个</span></li>
                    <li><span>第三级第二个</span></li>
                    <li><span>第三级第三个</span></li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <em></em><span>第一级第三个</span>
        <ul>
            <li>
                <em></em><span>第二级第一个</span>
                <ul>
                    <li><span>第三级第一个</span></li>
                    <li><span>第三级第二个</span></li>
                    <li><span>第三级第三个</span></li>
                </ul>
            </li>
            <li>
                <em></em><span>第二级第二个</span>
                <ul>
                    <li><span>第三级第一个</span></li>
                    <li><span>第三级第二个</span></li>
                    <li><span>第三级第三个</span></li>
                </ul>
            </li>
            <li>
                <em></em><span>第二级第三个</span>
                <ul>
                    <li><span>第三级第一个</span></li>
                    <li><span>第三级第二个</span></li>
                    <li><span>第三级第三个</span></li>
                </ul>
            </li>
        </ul>
    </li>
</ul>
<script type="text/javascript" src="jquery-1.11.3.js"></script>
<script type="text/javascript">
    $("#box em").next("span").css("cursor","pointer");
// 利用事件委托
    $("#box").click(function (e) {
        // 通过事件源判断点击的元素对象
        e = e || window.event;
        var target = e.target || e.srcElement;
        // 获取事件源的标签名,通过tagName 获取的标签名全部是大写
        var tagName = target.tagName.toLowerCase();
        if(tagName === "em"||tagName === "span"){
            // 同一级的ul
            var nextUl = $(target).nextAll("ul");
            if(!nextUl.length)return;
            // nextUl.is(":hidden")  如果是隐藏的，返回true,否则是false;
            // nextUl.is(":visible")    如果是显示的，返回true;否则是false
            if(nextUl.is(":hidden")){
                nextUl.show().prevAll("em").addClass("open");
            }else{
                // 获取当前父级下的所有ul，让它隐藏
                nextUl.parent().find("ul").hide();
                nextUl.parent().find("em").removeClass("open")
            }
        }
    })


</script>
</body>
</html>